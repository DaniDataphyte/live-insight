{{ if user }}
    <div class="mt-8 p-6 bg-gray-50 rounded-lg">
        <h3 class="text-xl font-semibold mb-4">Leave a Comment</h3>
        
        {{ meerkat:create }}
            <div class="space-y-4">
                {{ fields }}
                    <div class="form-group">
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            {{ display }}
                        </label>
                        <div class="mt-1">
                            {{ field }}
                        </div>
                    </div>
                {{ /fields }}

                <button type="submit" 
                        class="mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">
                    Submit Comment
                </button>
            </div>
        {{ /meerkat:create }}
    </div>
{{ else }}
    <div class="mt-8 p-6 bg-gray-50 rounded-lg">
        <p class="text-gray-600">Please <a href="#" data-login-link @click="isLoginModalOpen = true" class="text-blue-600 hover:underline">login</a> to leave a comment.</p>
    </div>
{{ /if }}

<!-- Display existing comments -->
<div class="mt-8">
    <h3 class="text-xl font-semibold mb-4">Comments</h3>
    
    {{ meerkat:comments }}
        {{ if no_results }}
            <p class="text-gray-500">No comments yet. Be the first to comment!</p>
        {{ /if }}

        {{ comments }}
            <div class="mb-6 p-4 bg-white rounded-lg shadow">
                <div class="flex items-start justify-between">
                    <div>
                        <p class="font-medium">{{ author:name }}</p>
                        <p class="text-sm text-gray-500">{{ date }}</p>
                    </div>
                </div>
                <div class="mt-2 text-gray-700">
                    {{ content }}
                </div>
            </div>
        {{ /comments }}
    {{ /meerkat:comments }}
</div>